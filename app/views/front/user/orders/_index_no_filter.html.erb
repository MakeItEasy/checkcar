<%= grid @orders_grid, show_filters: :no do |g|
  g.column name: Order.human_attribute_name(:order_no), attribute: "order_no" do |item|
    if can? :read, item
      link_to(item.order_no, front_user_order_path(item))
    end
  end
  g.column name: Order.human_attribute_name(:status), attribute: "status", detach_with_id: :status_filter do |item|
    render 'common/order/order_status_label', order: item
  end
  g.column name: Order.human_attribute_name(:order_time), attribute: "order_time" do |item|
    l(item.order_time)
  end
  g.column name: Order.human_attribute_name(:car_number), ordering: false do |item|
    item.car_number
  end
  g.column name: Order.human_attribute_name(:telephone), attribute: "telephone", ordering: false
  g.column do |item|
    links = []
    if can? :read, item
      links << link_to(I18n.t('view.action.show'), front_user_order_path(item))
    end
    if can? :cancel, item
      links << link_to(I18n.t('view.action.cancel'), cancel_front_user_order_path(item), {method: :patch,
        data: { confirm: t('view.confirm.order.cancel')}})
    end
    links.join(t('view.label.links_split')).html_safe
  end
end -%>
