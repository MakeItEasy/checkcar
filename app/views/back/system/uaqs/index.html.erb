<div class='box car-toolbox'>
  <div class="btn-toolbar" role="toolbar">
  </div>
</div>

<!-- scopes -->
<div>
  <a class="btn <%= params[:scope].present? ? 'btn-default' : 'btn-primary'%>" href="<%= back_system_uaqs_path %>">
    <%= t('view.label.all')%>
    <span class="badge" style="margin-left:10px;"><%= @count_infos[0]%></span>
  </a>
  <a class="btn <%= params[:scope] == 'wait_answer' ? 'btn-primary' : 'btn-default'%>" href="<%= back_system_uaqs_path(scope: 'wait_answer') %>">
    <%= t('view.label.wait_answer')%>
    <span class="badge" style="margin-left:10px;"><%= @count_infos[1]%></span>
  </a>
  <a class="btn <%= params[:scope] == 'answered' ? 'btn-primary' : 'btn-default'%>" href="<%= back_system_uaqs_path(scope: 'answered') %>">
    <%= t('view.label.answered')%>
    <span class="badge" style="margin-left:10px;"><%= @count_infos[2]%></span>
  </a>
</div>
<br>

<div class='car-content-list'>

  <%= grid @uaqs_grid do |g|
    g.column name: Uaq.human_attribute_name(:id), attribute: "id"
    g.column name: Uaq.human_attribute_name(:user_id), attribute: "user_id" do |item|
      item.user.show_name
    end
    g.column name: t('view.label.status') do |item|
      render_question_status(item.answered?) 
    end
    g.column name: Uaq.human_attribute_name(:question), attribute: "question", ordering: false
    g.column name: Uaq.human_attribute_name(:created_at), attribute: "created_at", filter: false do |item|
      # distance_of_time_in_words(Time.now, item.created_at)
      distance_of_time_in_words_to_now(item.created_at, include_seconds: true)
    end
    g.column do |item|
      links = []
      if can? :read, item
        links << link_to(I18n.t('view.action.show'), [:back, :system, item])
      end
      if can? :update, item
        links << link_to(I18n.t('view.action.answer'), edit_back_system_uaq_path(item))
      end
      links.join(t('view.label.links_split')).html_safe
    end
  end -%>

</div>
